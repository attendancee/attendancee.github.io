<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CourseBag | Engineering & AI Portal</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #00cf7f;
            --google-blue: #4285F4;
            --bg: #f8f9fa;
        }

        body { font-family: 'Inter', sans-serif; margin: 0; background: var(--bg); color: #1a1a1a; transition: 0.5s; }

        /* --- Dynamic One-Tap --- */
        #google-one-tap {
            position: fixed; top: 20px; right: 20px; width: 320px;
            background: #fff; border-radius: 12px; border: 1px solid #dadce0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15); padding: 16px; z-index: 3000;
            display: none; /* Hidden until email is entered */
        }

        /* --- Hero Design --- */
        .hero { padding: 150px 20px; text-align: center; max-width: 900px; margin: auto; }
        .hero h1 { font-size: 3.8rem; letter-spacing: -2px; margin-bottom: 20px; }
        .hero span { color: var(--google-blue); }

        /* --- The Entry Box --- */
        .entry-container {
            background: white; padding: 10px; border-radius: 50px;
            display: flex; border: 1px solid #ddd; max-width: 500px; margin: 40px auto;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }
        .entry-container input {
            flex: 1; border: none; outline: none; padding-left: 20px; font-size: 16px;
        }
        .btn-go {
            background: #000; color: #fff; border: none; padding: 12px 30px;
            border-radius: 40px; font-weight: 700; cursor: pointer;
        }

        /* --- Hidden Dashboard --- */
        #dashboard {
            display: none; padding: 100px 50px; text-align: center;
            background: #fff; min-height: 100vh;
        }

        .welcome-badge {
            background: rgba(0,207,127,0.1); color: var(--primary);
            padding: 8px 20px; border-radius: 20px; font-weight: 700; display: inline-block;
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="welcome-index">
    <div class="hero">
        <h1>Advanced <span>Learning</span> for Modern Engineers.</h1>
        <p>Enter your professional email to sync your laboratory profile.</p>
        
        <div class="entry-container">
            <input type="email" id="user-email" placeholder="Your Gmail address...">
            <button class="btn-go" onclick="syncUser()">Get Started</button>
        </div>
    </div>
</div>

<div id="google-one-tap">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <span style="font-size:12px; font-weight:600; color:#5f6368;">Continue to CourseBag</span>
        <i class="fas fa-times" style="cursor:pointer;" onclick="closePopup()"></i>
    </div>
    <div style="display:flex; align-items:center; gap:12px; cursor:pointer;" onclick="enterDashboard()">
        <div id="user-initial" style="width:40px; height:40px; border-radius:50%; background:var(--primary); color:white; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:20px;">?</div>
        <div>
            <div id="display-name" style="font-size:14px; font-weight:600;">Detecting Name...</div>
            <div id="display-email" style="font-size:12px; color:#70757a;">email@example.com</div>
        </div>
    </div>
</div>

<div id="dashboard">
    <div class="welcome-badge">ACTIVE SESSION</div>
    <h1 id="dash-welcome">Welcome back, User!</h1>
    <p>Your AI & Robotics curriculum is ready for deployment.</p>
    <hr style="width:50px; border: 2px solid var(--primary); margin: 30px auto;">
    
    <div style="display:grid; grid-template-columns: repeat(3, 1fr); gap:20px; max-width:1000px; margin:50px auto;">
        <div style="padding:40px; border:1px solid #eee; border-radius:20px;">
            <i class="fas fa-microchip" style="font-size:30px; color:var(--primary);"></i>
            <h3>Hardware Lab</h3>
        </div>
        <div style="padding:40px; border:1px solid #eee; border-radius:20px;">
            <i class="fas fa-brain" style="font-size:30px; color:var(--google-blue);"></i>
            <h3>Neural Training</h3>
        </div>
        <div style="padding:40px; border:1px solid #eee; border-radius:20px;">
            <i class="fas fa-code-branch" style="font-size:30px; color:purple;"></i>
            <h3>Edge Deploy</h3>
        </div>
    </div>
</div>

<script>
    function syncUser() {
        const email = document.getElementById('user-email').value;
        if(!email || !email.includes('@')) {
            alert("Please enter a valid email to sync.");
            return;
        }

        // 1. Extract Name from Email (e.g., "john" from "john@gmail.com")
        const namePart = email.split('@')[0];
        const formattedName = namePart.charAt(0).toUpperCase() + namePart.slice(1);

        // 2. Update the Google Pop-up Dynamically
        document.getElementById('display-name').innerText = formattedName;
        document.getElementById('display-email').innerText = email;
        document.getElementById('user-initial').innerText = formattedName.charAt(0);
        
        // 3. Show the Pop-up
        document.getElementById('google-one-tap').style.display = 'block';
    }

    function enterDashboard() {
        const name = document.getElementById('display-name').innerText;
        
        // Hide Welcome, Show Dashboard
        document.getElementById('welcome-index').classList.add('hidden');
        document.getElementById('google-one-tap').classList.add('hidden');
        document.getElementById('dashboard').style.display = 'block';
        
        // Personalize the Dashboard
        document.getElementById('dash-welcome').innerText = "Welcome back, " + name + "!";
    }

    function closePopup() {
        document.getElementById('google-one-tap').style.display = 'none';
    }
</script>

</body>
</html>
